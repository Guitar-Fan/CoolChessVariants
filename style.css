/* --- Main Board and Piece Styling --- */

:root {
    --board-bg: #1a1a2e;
    --light-square: #e3e3e3;
    --dark-square: #8a2be2; /* A nice purple */
    --light-square-hover: #f0f0f0;
    --dark-square-hover: #9d4edd;
    --highlight-color: rgba(255, 255, 0, 0.6); /* Yellow for selected piece */
    --move-indicator-color: rgba(30, 255, 139, 0.55);
    --quantum-state-color: rgba(0, 191, 255, 0.4); /* Deep sky blue glow */
    --capture-indicator-color: rgba(255, 69, 0, 0.7);
}

body {
    background-color: var(--board-bg);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    font-family: 'Roboto', sans-serif;
    color: #fff;
    overflow: hidden; /* prevents scrollbars from flashing on load */
}

#game-container {
    display: flex;
    flex-direction: row;
    gap: 30px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 15px;
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.18);
}

#chessboard {
    width: 720px;
    height: 720px;
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    grid-template-rows: repeat(8, 1fr);
    border: 5px solid #0f0c29;
    border-radius: 10px;
    box-shadow: 0 0 25px rgba(138, 43, 226, 0.5);
}

.square {
    width: 90px;
    height: 90px;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition: background-color 0.2s ease;
}

.square.light {
    background-color: var(--light-square);
}

.square.dark {
    background-color: var(--dark-square);
}

.square.light:hover {
    background-color: var(--light-square-hover);
}
.square.dark:hover {
    background-color: var(--dark-square-hover);
}

/* --- Piece Graphics --- */
.piece {
    width: 80%;
    height: 80%;
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    cursor: grab;
    transition: transform 0.1s ease-in-out;
    position: relative; /* For z-index to work */
    z-index: 10;
}

.piece:active {
    cursor: grabbing;
    transform: scale(1.1);
}

/* Piece Images - Custom SVG set */
.w-pawn { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><g fill="none" fill-rule="evenodd" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22.5 11.63V6M22.5 25s4.5-7.5 4.5-11.25A4.5 4.5 0 0 0 22.5 9.25a4.5 4.5 0 0 0-4.5 4.5C18 17.5 22.5 25 22.5 25z" fill="#FFF" /><path d="M22.5 25h-9c0 4.5 3.75 8.25 9 8.25s9-3.75 9-8.25h-9z" fill="#FFF"/><path d="M12 37.5h21v-3H12v3z" fill="#FFF" /><path d="M22.5 9.25s-1.5-1.5-1.5-3" /><path d="M22.5 9.25s1.5-1.5 1.5-3" /></g></svg>'); }
.b-pawn { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><g fill="none" fill-rule="evenodd" stroke="#FFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22.5 11.63V6M22.5 25s4.5-7.5 4.5-11.25A4.5 4.5 0 0 0 22.5 9.25a4.5 4.5 0 0 0-4.5 4.5C18 17.5 22.5 25 22.5 25z" fill="#333" /><path d="M22.5 25h-9c0 4.5 3.75 8.25 9 8.25s9-3.75 9-8.25h-9z" fill="#333"/><path d="M12 37.5h21v-3H12v3z" fill="#333" /><path d="M22.5 9.25s-1.5-1.5-1.5-3" /><path d="M22.5 9.25s1.5-1.5 1.5-3" /></g></svg>'); }
.w-rook { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><g fill="#FFF" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 39h27v-3H9v3zM12 36v-4h21v4H12zM11 14V9h4v2h5V9h5v2h5V9h4v5" /><path d="M34 14l-3 3H14l-3-3" /><path d="M31 17v12.5H14V17" /><path d="M31 29.5l1.5 2.5h-20l1.5-2.5" /><path d="M14 17h17" fill="none" /></g></svg>'); }
.b-rook { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><g fill="#333" stroke="#FFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 39h27v-3H9v3zM12 36v-4h21v4H12zM11 14V9h4v2h5V9h5v2h5V9h4v5" /><path d="M34 14l-3 3H14l-3-3" /><path d="M31 17v12.5H14V17" /><path d="M31 29.5l1.5 2.5h-20l1.5-2.5" /><path d="M14 17h17" fill="none" /></g></svg>'); }
.w-knight { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><g fill="#FFF" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10c10.5 1 16.5 8 16 29H15c-2 0-9-11.5-8-21" /><path d="M24 18c.38 2.91-5.55 7.37-8 9-3 2-2.82 4.34-5 4-1.042-.15.5-3.5-1-4-1-1-1.22-3.42 0-4 .6-.3 2.25-1 4-1 3 0 4-1 4-4 0-2 6-12 6-12s1.89-1.9 2-3.5c-.37-1-2-1-2-3l-1-1" /><path d="M9.5 25.5A.5.5 0 1 1 8.5 25.5a.5.5 0 1 1 1 0" /><path d="M15 15.5c-1.5 1-2 2-2.5 4" /></g></svg>'); }
.b-knight { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><g fill="#333" stroke="#FFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 10c10.5 1 16.5 8 16 29H15c-2 0-9-11.5-8-21" /><path d="M24 18c.38 2.91-5.55 7.37-8 9-3 2-2.82 4.34-5 4-1.042-.15.5-3.5-1-4-1-1-1.22-3.42 0-4 .6-.3 2.25-1 4-1 3 0 4-1 4-4 0-2 6-12 6-12s1.89-1.9 2-3.5c-.37-1-2-1-2-3l-1-1" /><path d="M9.5 25.5A.5.5 0 1 1 8.5 25.5a.5.5 0 1 1 1 0" /><path d="M15 15.5c-1.5 1-2 2-2.5 4" /></g></svg>'); }
.w-bishop { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><g fill="#FFF" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 36c3.39-.97 10.11.43 13.5-2 3.39 2.43 10.11 1.03 13.5 2" /><path d="M15 32c2.5 2.5 12.5 2.5 15 0 .5-1.5 0-2 0-2 0-2.5-2.5-4-2.5-4 5.5-2.5 7-7.5 7-11.5 0-4-2-8-11-8-9 0-11 4-11 8 0 4 1.5 9 7 11.5 0 0-2.5 1.5-2.5 4 0 0-.5.5 0 2z" /><path d="M25 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 1 1 5 0z" /><path d="M17.5 26h10" /></g></svg>'); }
.b-bishop { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><g fill="#333" stroke="#FFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M9 36c3.39-.97 10.11.43 13.5-2 3.39 2.43 10.11 1.03 13.5 2" /><path d="M15 32c2.5 2.5 12.5 2.5 15 0 .5-1.5 0-2 0-2 0-2.5-2.5-4-2.5-4 5.5-2.5 7-7.5 7-11.5 0-4-2-8-11-8-9 0-11 4-11 8 0 4 1.5 9 7 11.5 0 0-2.5 1.5-2.5 4 0 0-.5.5 0 2z" /><path d="M25 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 1 1 5 0z" /><path d="M17.5 26h10" /></g></svg>'); }
.w-queen { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><g fill="#FFF" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M8 12a2 2 0 1 1-4 0 2 2 0 1 1 4 0zM24.5 7.5a2 2 0 1 1-4 0 2 2 0 1 1 4 0zM41 12a2 2 0 1 1-4 0 2 2 0 1 1 4 0zM16 8.5a2 2 0 1 1-4 0 2 2 0 1 1 4 0zM33 9a2 2 0 1 1-4 0 2 2 0 1 1 4 0z" /><path d="M9 26c8.5-1.5 21-1.5 27 0l2-12-7 11V11l-5.5 13.5-3-15-3 15L14 11v14L7 14l2 12z" /><path d="M9 26c0 2 1.5 4 1.5 4 5 3.5 16.5 3.5 21 0 1-1 1.5-4 1.5-4" /><path d="M11 30v6h24v-6" /><path d="M11 36h24v3H11v-3z" /></g></svg>'); }
.b-queen { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><g fill="#333" stroke="#FFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M8 12a2 2 0 1 1-4 0 2 2 0 1 1 4 0zM24.5 7.5a2 2 0 1 1-4 0 2 2 0 1 1 4 0zM41 12a2 2 0 1 1-4 0 2 2 0 1 1 4 0zM16 8.5a2 2 0 1 1-4 0 2 2 0 1 1 4 0zM33 9a2 2 0 1 1-4 0 2 2 0 1 1 4 0z" /><path d="M9 26c8.5-1.5 21-1.5 27 0l2-12-7 11V11l-5.5 13.5-3-15-3 15L14 11v14L7 14l2 12z" /><path d="M9 26c0 2 1.5 4 1.5 4 5 3.5 16.5 3.5 21 0 1-1 1.5-4 1.5-4" /><path d="M11 30v6h24v-6" /><path d="M11 36h24v3H11v-3z" /></g></svg>'); }
.w-king { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><g fill="#FFF" stroke="#000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22.5 11.5L34 25l-11.5 14L11 25z" /><path d="M22.5 11.5l-3-8.5m3 8.5l3-8.5" /><path d="M11 25l-6 6" /><path d="M34 25l6 6" /><path d="M11 40h23" /><path d="M22.5 7.5V6" /><path d="M20 12h5" /><path d="M22.5 11.5L34 25l-11.5 14L11 25z" fill="none" /></g></svg>'); }
.b-king { background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 45 45"><g fill="#333" stroke="#FFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22.5 11.5L34 25l-11.5 14L11 25z" /><path d="M22.5 11.5l-3-8.5m3 8.5l3-8.5" /><path d="M11 25l-6 6" /><path d="M34 25l6 6" /><path d="M11 40h23" /><path d="M22.5 7.5V6" /><path d="M20 12h5" /><path d="M22.5 11.5L34 25l-11.5 14L11 25z" fill="none" /></g></svg>'); }

/* --- Visual Indicators --- */
.square.selected {
    box-shadow: inset 0 0 15px 5px var(--highlight-color);
}

.indicator {
    width: 30%;
    height: 30%;
    border-radius: 50%;
    position: absolute;
    z-index: 5;
    pointer-events: none; /* Can click through them */
}

.move-indicator {
    background-color: var(--move-indicator-color);
}

.capture-indicator {
    background-color: transparent;
    border: 6px solid var(--capture-indicator-color);
    box-sizing: border-box;
    width: 85%;
    height: 85%;
}

/* This is the cool part - the quantum glow */
.quantum-state {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--quantum-state-color);
    border-radius: 4px;
    z-index: 1;
    pointer-events: none;
    animation: pulse 2s infinite ease-in-out;
}

@keyframes pulse {
    0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(0, 191, 255, 0.7); }
    70% { transform: scale(1); box-shadow: 0 0 10px 10px rgba(0, 191, 255, 0); }
    100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(0, 191, 255, 0); }
}

.in-check {
    /* Use a red glow for the king when in check */
    animation: check-pulse 1s infinite ease-in-out;
}

@keyframes check-pulse {
    0% { box-shadow: 0 0 15px 5px rgba(255, 0, 0, 0.7); }
    50% { box-shadow: 0 0 25px 15px rgba(255, 0, 0, 0.3); }
    100% { box-shadow: 0 0 15px 5px rgba(255, 0, 0, 0.7); }
}